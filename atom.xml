<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Apollonian Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ApolloZhu.github.io/"/>
  <updated>2017-03-19T02:59:14.000Z</updated>
  <id>https://ApolloZhu.github.io/</id>
  
  <author>
    <name>Apollo Zhu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>macOS 重定向域名到 Hexo 本地服务器</title>
    <link href="https://ApolloZhu.github.io/2017/03/18/redirecting-domain-to-local-hexo-server-on-macOS/"/>
    <id>https://ApolloZhu.github.io/2017/03/18/redirecting-domain-to-local-hexo-server-on-macOS/</id>
    <published>2017-03-18T20:36:34.000Z</published>
    <updated>2017-03-19T02:59:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>每次把网站截屏发朋友圈，被别人发现地址栏是 <code>localhost:4000</code>，稍微觉得有点 low。也是，怎么也得展示个像样点的域名吧。所以在网上查了查，整理收集如下。我对网络基本不了解，望各位路过的大神们指点一二。</p>
<a id="more"></a>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>假设我们很有逼格的域名是 <code>example.com</code></p>
<p>在回环接口（loopback interface）新建一个地址，<code>10.0.0.1</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ifconfig lo0 <span class="built_in">alias</span> 10.0.0.1</div></pre></td></tr></table></figure>
<p><code>-e</code> 启动防火墙（Packet Filter），<code>-f</code> 载入后面的规则 —— 将所有到 <code>10.0.0.1:80</code>（HTTP 默认端口）的连接转发到 <code>127.0.0.1:4000</code>（hexo 默认本地服务器地址）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="string">"rdr pass on lo0 inet proto tcp from any to 10.0.0.1 port 80 -&gt; 127.0.0.1 port 4000"</span> | sudo pfctl -ef -</div></pre></td></tr></table></figure>
<p>然后通过 <code>/etc/hosts</code> 把 <code>example.com</code> 映射到 <code>10.0.0.1</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">10.0.0.1 example.com</div></pre></td></tr></table></figure>
<p>清空本地 DNS 缓存</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dscacheutil -flushcache</div></pre></td></tr></table></figure>
<p>完成，现在可以在浏览器中输入 <code>example.com</code> 来代替了！</p>
<hr>
<h2 id="还原"><a href="#还原" class="headerlink" title="还原"></a>还原</h2><p>删除新建的地址，重置防火墙，清空本地 DNS 缓存</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo ifconfig lo0 -alias 10.0.0.1</div><div class="line">sudo pfctl -F all <span class="_">-f</span> /etc/pf.conf</div><div class="line">dscacheutil -flushcache</div></pre></td></tr></table></figure>
<hr>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><ol>
<li><a href="http://serverfault.com/questions/102416/iptables-equivalent-for-mac-os-x/" target="_blank" rel="external">iptables equivalent for mac os x - StackExchange</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;每次把网站截屏发朋友圈，被别人发现地址栏是 &lt;code&gt;localhost:4000&lt;/code&gt;，稍微觉得有点 low。也是，怎么也得展示个像样点的域名吧。所以在网上查了查，整理收集如下。我对网络基本不了解，望各位路过的大神们指点一二。&lt;/p&gt;
    
    </summary>
    
      <category term="瞎捣鼓" scheme="https://ApolloZhu.github.io/categories/%E7%9E%8E%E6%8D%A3%E9%BC%93/"/>
    
    
      <category term="macOS" scheme="https://ApolloZhu.github.io/tags/macOS/"/>
    
      <category term="tips" scheme="https://ApolloZhu.github.io/tags/tips/"/>
    
      <category term="server" scheme="https://ApolloZhu.github.io/tags/server/"/>
    
  </entry>
  
</feed>
